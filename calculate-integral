#!/bin/bash

# Copyright (c) 2018, Gabriel Johnson. All rights reserved.

#ccl=ccl/dx86cl64
ccl=ccl

#wolfram=/Applications/Mathematica.app/Contents/MacOS/MathKernel
wolfram=/usr/local/bin/MathKernel
test -f "$wolfram" || {
    echo "$0: Error: Mathematica kernel not found.">&2
    exit 1
}

cd $(dirname "${BASH_SOURCE[0]}")

$ccl -I hkm.image $*\
  | "$wolfram" -noprompt\
  | sed -e '1s/^/Hilbert-Kunz Multiplicity	= /' -e '2s/^/F-Signature			= /'

exit ${PIPESTATUS[0]}
